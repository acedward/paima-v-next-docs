"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9150],{1976:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"home/quickstart/quickstart","title":"Quick Start","description":"Linux and Macos are supported. Windows WSL is experimental.","source":"@site/docs/home/10-quickstart/10-quickstart.md","sourceDirName":"home/10-quickstart","slug":"/quick-start","permalink":"/paima-v-next-docs/quick-start","draft":false,"unlisted":false,"editUrl":"https://github.com/PaimaStudios/paima-engine-docs/tree/main/docs/home/10-quickstart/10-quickstart.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"slug":"/quick-start"},"sidebar":"tutorialSidebar","previous":{"title":"What is Paima Engine?","permalink":"/paima-v-next-docs/what-is-paima-engine"},"next":{"title":"Paima Engine Components","permalink":"/paima-v-next-docs/home/components/"}}');var i=t(3261),r=t(6404);const a={sidebar_position:10,slug:"/quick-start"},o="Quick Start",c={},d=[{value:"Terminal",id:"terminal",level:3},{value:"Browser",id:"browser",level:3},{value:"State Machine",id:"state-machine",level:2},{value:"Frontend (dApp)",id:"frontend-dapp",level:2},{value:"Frontend Writes",id:"frontend-writes",level:3},{value:"Frontend Reads",id:"frontend-reads",level:3},{value:"Chain Config",id:"chain-config",level:2},{value:"Contracts &amp; Paima-L2",id:"contracts--paima-l2",level:2},{value:"Process Orchestrator",id:"process-orchestrator",level:2},{value:"Grammar",id:"grammar",level:2}];function l(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"quick-start",children:"Quick Start"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Linux and Macos are supported. Windows WSL is experimental."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["First clone the repository and copy the ",(0,i.jsx)(n.code,{children:"/example-project"})," folder.",(0,i.jsx)(n.br,{}),"\n","This will give us a working template."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"git clone git@github.com:PaimaStudios/paima-engine.git\ncd paima-engine\ngit checkout v-next-sample\ncd ..\ncp -r paima-engine/example-project my-dapp\ncd my-dapp\n"})}),"\n",(0,i.jsx)(n.p,{children:"Check for system dependencies.\nThis will check if all dependencies are met."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"./check.sh\n"})}),"\n",(0,i.jsx)(n.p,{children:"Install dependencies"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"deno install --allow-scripts\n./patch.sh\n"})}),"\n",(0,i.jsx)(n.p,{children:"Compile EVM Contracts"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"deno task evm\n"})}),"\n",(0,i.jsx)(n.p,{children:"Launch Node"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"deno task dev\n"})}),"\n",(0,i.jsx)(n.p,{children:"Launch dApp"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"deno task frontend\n"})}),"\n",(0,i.jsx)(n.p,{children:"Now you should see the dApp running in your browser!"}),"\n",(0,i.jsx)(n.h3,{id:"terminal",children:"Terminal"}),"\n",(0,i.jsx)("iframe",{src:"https://drive.google.com/file/d/1vLHmm9HrPrKiIHJlnnX3aopeX0J-A9Oz/preview",width:"640",height:"480",allow:"autoplay"}),"\n",(0,i.jsx)(n.h3,{id:"browser",children:"Browser"}),"\n",(0,i.jsx)("iframe",{src:"https://drive.google.com/file/d/1hDh5PkKQdDx8UXnBsS1clypvXF14Msvm/preview",width:"640",height:"480",allow:"autoplay"}),"\n",(0,i.jsx)(n.p,{children:"Once you have the template up and running, there are different parts you can modify or extend."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"State Machine"}),": Logic and rules for events."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Front End"}),": User side App."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Chain Config"}),": Connect different chains."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Process Orchestrator"}),": Decide what processes to start and run for development."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Contracts & Paima-L2"}),": Deploy and connect different contracts."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Grammar"}),": Define Paima-L2 Contract valid Inputs"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["More ",(0,i.jsx)(n.a,{href:"/paima-v-next-docs/home/components/",children:"Components"})]}),"\n",(0,i.jsx)(n.h2,{id:"state-machine",children:"State Machine"}),"\n",(0,i.jsxs)(n.p,{children:["This is the main component where logic and rules are processed.\nThis runs in the ",(0,i.jsx)(n.code,{children:"Paima Engine Node"})]}),"\n",(0,i.jsxs)(n.p,{children:["In the examples the file is named ",(0,i.jsx)(n.code,{children:"state-machine.ts"})," and contains ",(0,i.jsx)(n.code,{children:"state-transition"})," functions that are executed each time the corresponding ",(0,i.jsx)(n.code,{children:"event prefix"})," defined in the ",(0,i.jsx)(n.code,{children:"grammar"})," is called. E.g., Each time a ERC721 Token es Minted, or a ",(0,i.jsx)(n.a,{href:"/paima-v-next-docs/home/components/paima-l2-contract",children:"PaimaL2 Event"})," is sent."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'stm.addStateTransition(\n  "transfer",\n  function* (data) {\n    const { to, from, value } = data.parsedInput.payload;\n    yield* World.resolve(insertStateMachineInput, {\n      inputs: `transfer ${value} from ${from} to ${to}`,\n      block_height: data.blockHeight,\n    });\n    return;\n  },\n);\n'})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["IMPORTANT These functions MUST be deterministic. Therefore they should not use ",(0,i.jsx)(n.code,{children:"Math.random()"}),", ",(0,i.jsx)(n.code,{children:"new Date()"}),", do external API calls, or any function that might give different results on different times or machines."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["More about the ",(0,i.jsx)(n.a,{href:"/paima-v-next-docs/home/components/state-machine",children:"State Machine"})]}),"\n",(0,i.jsx)(n.h2,{id:"frontend-dapp",children:"Frontend (dApp)"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"example-project"})," comes with a folder called ",(0,i.jsx)(n.code,{children:"frontend"})," that is Web Application."]}),"\n",(0,i.jsx)(n.h3,{id:"frontend-writes",children:"Frontend Writes"}),"\n",(0,i.jsx)(n.p,{children:"This web application, game or other technologies, to interact with Paima Engine, only write to the blockchain:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Direct Contract Interaction"}),". E.g., Call ",(0,i.jsx)(n.code,{children:"transfer"})," on a ",(0,i.jsx)(n.code,{children:"ERC20"})," contract. Wallets can be integrated to make these calls."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Direct Paima L2 Contract Interaction"}),": ",(0,i.jsx)(n.code,{children:"Submit Input"})," method. This allows to pass a custom message to the engine. Wallets can be integrated to make these calls."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Batcher Paima L2 Contract Interaction"}),": Interact with a Paima L2 Contract, but through a HTTP call. This service is who converts and validates the call and writes to the Paima L2 Contract."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"frontend-reads",children:"Frontend Reads"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reads from Blockchain"})," Some blockchains expose APIs you can read to get the state or other information."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reads from Paima Engine API"})," Paima Engine Provides son Endpoints you can consume"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reads from Custom API"})," You can setup your own custom endpoints"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"chain-config",children:"Chain Config"}),"\n",(0,i.jsx)(n.p,{children:"Paima-Engine requires to setup the:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Chains to monitor"}),"\n",(0,i.jsx)(n.li,{children:"Chains to sync"}),"\n",(0,i.jsx)(n.li,{children:"Contracts events to listen"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["This is a minimal config to track a EVM Chain, and a ERC721 contract on this chain. Each time the ",(0,i.jsx)(n.code,{children:"Transfer"})," event get called, Paima-Engine will execute the ",(0,i.jsx)(n.code,{children:"transfer-assets"})," function and also automatically track the current ownership of Tokens."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'export const localhostConfig = new ConfigBuilder()\n  .setNamespace(builder => builder.setSecurityNamespace("my-app-track-erc721"))\n  .buildNetworks(builder => \n    builder.addViemNetwork({\n        ...hardhat,\n        name: "evmMain",\n    })\n  )\n  .buildSyncProtocols(builder =>\n   builder.addMain(\n        (networks) => networks.evmMain, \n        (network, deployments) => ({\n            name: "mainEvmRPC",\n            type: ConfigSyncProtocolType.EVM_RPC_MAIN,\n            chainUri: network.rpcUrls.default.http[0],\n            startBlockHeight: 1,\n            pollingInterval: 500,\n        })\n    )\n  )\n  .buildPrimitives(builder =>\n    builder.addPrimitive(\n        (syncProtocols) => syncProtocols.mainEvmRPC,\n        (network, deployments, syncProtocol) => ({\n          name: "Track-ERC721",\n          type: ConfigPrimitiveType.EvmRpcERC721,\n          startBlockHeight: 0,\n          contractAddress:\n            contractAddressesEvmMain().chain31337["Erc721DevModule#Erc721Dev"],\n          abi: getEvmEvent(\n            erc721dev.abi,\n            "Transfer(address,address,uint256)",\n          ),\n          scheduledPrefix: "transfer-assets",\n        })\n    )\n  )\n  .build();\n'})}),"\n",(0,i.jsxs)(n.p,{children:["More about ",(0,i.jsx)(n.a,{href:"/paima-v-next-docs/home/components/sync-service",children:"Sync & Chain Config"})]}),"\n",(0,i.jsx)(n.h2,{id:"contracts--paima-l2",children:"Contracts & Paima-L2"}),"\n",(0,i.jsx)(n.p,{children:"Paima can work with any contract deployed on the different chains.\nFor each chain, it adapts how and what information it extracts.\nAlso, Paima-Engine provides some contracts ready to use, that can provide extra functionalities."}),"\n",(0,i.jsx)(n.p,{children:"For example we can deploy this contract:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'pragma solidity ^0.8.20;\nimport {ERC20} from "@openzeppelin/contracts/token/ERC20/ERC20.sol";\n\ncontract Erc20Dev is ERC20 {\n    constructor() ERC20("MY ERC Token", "MYERC") {}\n\n    function mint(address _to, uint256 _amount) external {\n        _mint(_to, _amount);\n    }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["And each time the mint or transfer is called the ",(0,i.jsx)(n.code,{children:"event"})," defined in @openzeppelin's ERC20 defined event ",(0,i.jsx)(n.code,{children:"Transfer(from, to, value)"})," will be called, and this can be captured and processed in the ",(0,i.jsx)(n.code,{children:"state machine"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["More about ",(0,i.jsx)(n.a,{href:"/paima-v-next-docs/home/components/contracts",children:"Contracts"})]}),"\n",(0,i.jsx)(n.h2,{id:"process-orchestrator",children:"Process Orchestrator"}),"\n",(0,i.jsx)(n.p,{children:"Paima Engine, provides and allows manage common processes for the development of dApps."}),"\n",(0,i.jsx)(n.p,{children:"Connecting everything yourself to testnets, contract deployment, getting continual funds for gas payments is possible, but it's slow and complex process - so Paima Engine provides with tools to do these common tasks and allow local development."}),"\n",(0,i.jsxs)(n.p,{children:["This is main entry point, once the internal and custom processes are launched, they main ",(0,i.jsx)(n.code,{children:"sync"})," process is launched."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"const config = Value.Parse(OrchestratorConfig, {\n    processes: {\n        // Launch Dev DB & Collector\n        [ComponentNames.PAIMA_DB]: true,\n        [ComponentNames.COLLECTOR]: true,\n    },\n\n    processesToLaunch: [\n        startEvm,\n        startMidnight,\n    ],\n});\nawait start(config);\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["More About ",(0,i.jsx)(n.a,{href:"/paima-v-next-docs/home/components/processes",children:"Processes and Startup"})]}),"\n",(0,i.jsx)(n.h2,{id:"grammar",children:"Grammar"}),"\n",(0,i.jsxs)(n.p,{children:["Grammar connects the ",(0,i.jsx)(n.code,{children:"Paima-L2"})," contract and the ",(0,i.jsx)(n.code,{children:"State-Machine"}),"\nAllowing to convert and parse Paima-L2 inputs, and call the correct ",(0,i.jsx)(n.code,{children:"State-Machine"})," ",(0,i.jsx)(n.code,{children:"Transfer-Function"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'export const grammar = {\n  attack: [\n    ["playerId", Type.Integer()],\n    ["moveId", Type.Integer()],\n  ],\n  \n  // Auto-generate other primitives, but exclude midnight (we define it explicitly above)\n  ...Object.fromEntries(\n    Object.entries(mapPrimitivesToGrammar(localhostConfig.primitives))\n  ),\n} as const satisfies GrammarDefinition;\n'})}),"\n",(0,i.jsxs)(n.p,{children:["More About ",(0,i.jsx)(n.a,{href:"/paima-v-next-docs/home/components/grammar",children:"Grammar"})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},6404:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var s=t(9593);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);